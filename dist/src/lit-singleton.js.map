{"version":3,"file":"lit-singleton.js","sourceRoot":"","sources":["../../src/lit-singleton.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,KAAK,CAAC;AAEjC,MAAM,OAAgB,SAAU,SAAQ,UAAU;IAG9C,MAAM,CAAC,UAAU;QACb,MAAM,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC;QAC3B,IAAG,IAAI,CAAC,gBAAgB,EAAC;YACrB,OAAO,IAAI,CAAC,gBAAgB,CAAC;SAChC;QACD,MAAM,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;QAC5C,OAAO,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IAC7C,CAAC;IAMD,iBAAiB;QACb,KAAK,CAAC,iBAAiB,EAAE,CAAC;QAC1B,IAAI,IAAI,CAAC,WAAgC,CAAC,gBAAgB,IAAI,IAAI,EAAC;YAC/D,MAAM,IAAI,KAAK,CAAC,oCAAoC,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,CAAA;SAC/E;QACD,IAAK,IAAI,CAAC,WAAgC,CAAC,gBAAgB,IAAI,IAAI,EAAC;YAC/D,IAAI,CAAC,WAAgC,CAAC,gBAAgB,GAAG,IAAI,CAAC;SAClE;IACL,CAAC;IAED,oBAAoB;QAChB,IAAK,IAAI,CAAC,WAAgC,CAAC,gBAAgB,KAAK,IAAI,EAAC;YAChE,IAAI,CAAC,WAAgC,CAAC,gBAAgB,GAAG,IAAI,CAAC;SAClE;QACD,KAAK,CAAC,oBAAoB,EAAE,CAAC;IACjC,CAAC;;AAjBM,kBAAQ,GAA8C,CAAC,CAAC,EAAE,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC","sourcesContent":["import { LitElement } from \"lit\";\n\nexport abstract class Singleton extends LitElement {\n    static __singleton_elem: LitElement | null;\n\n    static getElement(): (Singleton | null) {\n        const { generator } = this;\n        if(this.__singleton_elem){\n            return this.__singleton_elem;\n        }\n        const elem = generator ? generator() : null;\n        return elem ? this.appender(elem) : null;\n    }\n\n    static generator? : (() => (LitElement));\n\n    static appender: (<T extends LitElement>(element: T) => T) = (e) => document.body.appendChild(e);\n\n    connectedCallback(){\n        super.connectedCallback();\n        if((this.constructor as typeof Singleton).__singleton_elem != null){\n            throw new Error(`More than one singleton of class ${this.constructor.name}`)\n        }\n        if ((this.constructor as typeof Singleton).__singleton_elem == null){\n            (this.constructor as typeof Singleton).__singleton_elem = this;\n        }\n    }\n\n    disconnectedCallback(){\n        if ((this.constructor as typeof Singleton).__singleton_elem === this){\n            (this.constructor as typeof Singleton).__singleton_elem = null;\n        }\n        super.disconnectedCallback();\n    }\n}"]}